<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Réception suite à un achat</title>
</head>
<body>
<div>
    <a th:href="@{/receptions/add/achat}" style="font-weight: bold;">Réception des achats</a>
    <a th:href="@{/receptions/add/autre}" style="margin-left: 20px;">Autre</a>
</div>

<h2>Réception > Nouvelle réception</h2>

<form method="get" th:action="@{/receptions/add/achat}">
    <label>Numéro d'achat :</label>
    <input type="text" name="numeroAchat" th:value="${numeroAchat}" />
    <label>Produit :</label>
    <input type="text" name="produit" th:value="${produit}" />
    <button type="submit">Chercher</button>
</form>

<table border="1">
    <thead>
    <tr>
        <th>Date achat</th>
        <th>Num d'achat</th>
        <th>Produit</th>
        <th>Unité</th>
        <th>Quantité</th>
        <th>Source</th>
        <th>Réception</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="r : ${receptions}">
        <form th:action="@{/receptions/save}" method="post">
            <input type="hidden" name="produit.id" th:value="${r.produit.id}" />
            <input type="hidden" name="entrepot.id" th:value="${r.entrepot.id}" />
            <td><input type="date" name="dateAchat" th:value="${r.dateAchat}" readonly /></td>
            <td><input type="text" name="numeroAchat" th:value="${r.numeroAchat}" readonly /></td>
            <td><input type="text" name="produit.libelle" th:value="${r.produit.libelle}" readonly /></td>
            <td><input type="text" name="produit.unite" th:value="${r.produit.unite}" readonly /></td>
            <td><input type="number" name="quantite" th:value="${r.quantite}" readonly /></td>
            <td><input type="text" name="source" th:value="${r.source}" readonly /></td>
            <td>
                <label>Date de réception :</label>
                <input type="date" name="dateReception" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}" required /><br/>

                <label>Magasin :</label>
                <select name="entrepot">
                    <option th:each="e : ${entrepots}" th:value="${e.id}" th:text="${e.nom}" th:selected="${e.id == r.entrepot.id}"></option>
                </select><br/>

                <button type="submit">Valider</button>
            </td>
        </form>
    </tr>
    </tbody>
</table>

<a th:href="@{/receptions}">&lt; Liste des réceptions</a>
</body>
</html>
